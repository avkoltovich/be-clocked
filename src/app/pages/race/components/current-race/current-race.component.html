<tui-island size="l">
  <h2 class="tui-island__title tui-space_bottom-5">Черника 2023. ITT.</h2>
  <div class="grid">
    <div class="racers-container">
      <p class="current">
        <span class="tui-text_body-xl">Стартует</span>
        <span class="tui-text_h3 racer">
          {{ (racers$ | async)![(currentRacerIndex$ | async)!] }}
        </span>
      </p>
      <p class="next">
        <span class="tui-text_body-xl">Следующий</span>
        <span class="tui-text_h3 racer">
          {{ (racers$ | async)![(currentRacerIndex$ | async)! + 1] }}
        </span>
      </p>
    </div>
    <div class="timer-container">
      <svg
        width="0"
        height="0"
      >
        <defs>
          <linearGradient
            id="gradient"
            gradientTransform="rotate(95)"
          >
            <stop
              offset="0%"
              stop-color="var(--tui-support-02)"
            ></stop>
            <stop
              offset="45%"
              stop-color="var(--tui-support-14)"
            ></stop>
            <stop
              offset="100%"
              stop-color="var(--tui-support-12)"
            ></stop>
          </linearGradient>
        </defs>
      </svg>

      <label
        class="timer"
        *ngIf="(racers$ | async)!.length > (currentRacerIndex$ | async)!; else emptyList"
        tuiProgressLabel
      >
        <span class="tui-text_h1">{{ value }}</span>

        <tui-progress-circle
          color="url(#gradient)"
          size="xl"
          [max]="max"
          [value]="value"
        ></tui-progress-circle>
      </label>
    </div>
    <div class="controls-container">
      <button
        tuiButton
        type="button"
        appearance="secondary"
        (click)="onStart()"
        [disabled]="(isRaceStarted$ | async)!"
      >
        <tui-svg
          src="tuiIconPlayCircleLarge"
          class="tui-space_right-2"
        ></tui-svg>
        Старт
      </button>
      <button
        tuiButton
        type="button"
        appearance="secondary"
        (click)="onSkip()"
        [disabled]="(isAllMembersStarted$ | async)! || !(isRaceStarted$ | async)"
      >
        <tui-svg
          src="tuiIconFastForwardLarge"
          class="tui-space_right-2"
        ></tui-svg>
        Пропуск
      </button>
      <button
        tuiButton
        type="button"
        appearance="secondary-destructive"
        (click)="onPause()"
        [disabled]="(isAllMembersStarted$ | async)! || !(isRaceStarted$ | async)"
      >
        <tui-svg
          src="tuiIconPauseCircleLarge"
          class="tui-space_right-2"
        ></tui-svg>
        Пауза
      </button>
      <button
        tuiButton
        type="button"
        appearance="flat"
        (click)="onReset()"
      >
        <tui-svg
          src="tuiIconRefreshCcwLarge"
          class="tui-space_right-2"
        ></tui-svg>
        Сброс
      </button>
    </div>
  </div>
</tui-island>

<ng-template #emptyList>
  <p class="tui-text_h3 empty-list">Все участники стартовали</p>
</ng-template>
